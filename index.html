<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Korece Kelime Oyunu</title>
  <style>
    body {
      font-family: "Comfortaa", sans-serif;
      margin: 0; padding: 0;
      box-sizing: border-box;
      background: #fffaf5;
    }
    h1, h2, h3, p {
      margin: 0; padding: 0;
    }
    #start-screen, #quiz-screen {
      display: none;
      text-align: center;
      padding-top: 50px;
    }
    #start-screen.active, #quiz-screen.active {
      display: block;
    }
    .btn {
      background: #F7D9C4;
      border: 2px solid #FFC49A;
      border-radius: 12px;
      padding: 15px 30px;
      cursor: pointer;
      font-size: 20px;
      margin: 10px;
      transition: 0.2s;
    }
    .btn:hover {
      background: #ffcaa3;
    }
    #question-container {
      margin-top: 50px;
    }
    .answer-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin: 30px 0;
    }
    .answer-btn {
      background: #F7D9C4;
      border: 2px solid #FFC49A;
      border-radius: 30px;
      width: 200px;
      padding: 15px;
      cursor: pointer;
      font-size: 18px;
      transition: 0.2s;
      text-align: center;
    }
    .answer-btn:hover {
      background: #ffcaa3;
    }
    #wrong-answers {
      margin-top: 30px;
      width: 60%;
      margin-left: auto;
      margin-right: auto;
      border: 1px solid #FFC49A;
      border-radius: 10px;
      min-height: 100px;
      padding: 10px;
      background: rgba(247, 217, 196, 0.2);
    }
    #wrong-answers h3 {
      margin-bottom: 10px;
    }
    #top-bar {
      display: flex;
      justify-content: space-between;
      padding: 20px 40px;
      align-items: center;
    }
    #toggle-music {
      background: #F7D9C4;
      border: 1px solid #FFC49A;
      border-radius: 40px;
      width: 70px;
      height: 70px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    #question-counter {
      font-size: 24px;
    }
    #mode-label {
      margin-top: 20px;
      font-size: 32px;
      color: #9FD520;
      font-family: "Coiny", cursive;
    }
    #korean-word {
      font-size: 64px;
      color: #9CD713;
      margin: 30px 0;
    }
  </style>
</head>
<body>

<div id="start-screen" class="active">
  <h1 style="color:#9FD520; font-size:64px; font-family:'Coiny';">
    KORECE KELÄ°ME OYUNU
  </h1>
  <h2 style="color:#9CD713; margin:20px 0;">
    BaÅŸlamadan Ã¶nce oyun modunu seÃ§!
  </h2>
  <button id="kimbap-button" class="btn">Kimbap Modu (Kolay)</button>
  <button id="gocu-button" class="btn">GoÃ§u Modu (Zor)</button>

  <!-- MÃ¼zik butonu Ã¶rneÄŸi, istersen start screen'de de koyabilirsin -->
  <!-- <button id="toggle-music" class="btn">MÃ¼zik AÃ§/Kapa</button> -->
</div>

<div id="quiz-screen">
  <div id="top-bar">
    <button id="toggle-music">ðŸ”ˆ</button>
    <div id="question-counter">1/20</div>
  </div>

  <h2 id="mode-label">Kimbap Modu</h2>
  
  <div id="question-container">
    <h1 id="korean-word">ê°€ê²Œ</h1>
    <div class="answer-buttons" id="answer-buttons"></div>
  </div>

  <button id="switch-mode-btn" class="btn">
    Kolay mÄ± geldi? Biraz acÄ± ekleyelim!
  </button>

  <div id="wrong-answers">
    <h3>YanlÄ±ÅŸ Cevaplar</h3>
    <ul id="wrong-list"></ul>
  </div>
</div>

<!-- Ses dosyalarÄ± (click, correct, wrong, music) -->
<audio id="click-sound" src="click.mp3"></audio>
<audio id="correct-sound" src="correct.mp3"></audio>
<audio id="wrong-sound" src="wrong.mp3"></audio>
<audio id="music-sound" src="music.mp3" loop></audio>

<script>
  // Ã–rnek kelimeler dizisi (sen elindeki 1000 kelimeyi buraya ekleyebilirsin)
  const words = [
    { korean: "ê°€ê²©", turkish: "fiyat" },
    { korean: "ê°€êµ¬", turkish: "mobilya" },
    { korean: "ê°€ê¹ë‹¤", turkish: "yakÄ±n olmak" },
    { korean: "ê°€ë”", turkish: "bazen" },
    { korean: "ê°€ë‹¤", turkish: "gitmek" },
    { korean: "ê°€ë¥´ì¹˜ë‹¤", turkish: "Ã¶ÄŸretmek" },
    { korean: "ê°€ë°©", turkish: "Ã§anta" },
    { korean: "ê°€ë³ë‹¤", turkish: "hafif olmak" },
    { korean: "ê°€ìˆ˜", turkish: "ÅŸarkÄ±cÄ±" },
    { korean: "ê°€ìŠ´", turkish: "gÃ¶ÄŸÃ¼s" },
    { korean: "ê°€ìš´ë°", turkish: "ortada" },
    { korean: "ê°€ì„", turkish: "sonbahar" },
    { korean: "ê°€ìž¥", turkish: "en Ã§ok" },
    { korean: "ê°€ì ¸ì˜¤ë‹¤", turkish: "getirmek" },
    { korean: "ê°€ì¡±", turkish: "aile" },
    { korean: "ê°€ì§€ë‹¤", turkish: "sahip olmak" },
    { korean: "ê°", turkish: "her, her bir" },
    { korean: "ê°„", turkish: "sÄ±rasÄ±nda, esnasÄ±nda" },
    { korean: "ê°„í˜¸ì‚¬", turkish: "hemÅŸire" },
    { korean: "ê°ˆë¹„", turkish: "kaburga" },
    // ... DevamÄ± sende :)
  ];

  // DOM elementleri
  const startScreen = document.getElementById("start-screen");
  const quizScreen = document.getElementById("quiz-screen");
  const kimbapBtn = document.getElementById("kimbap-button");
  const gocuBtn = document.getElementById("gocu-button");
  const modeLabel = document.getElementById("mode-label");
  const questionCounter = document.getElementById("question-counter");
  const koreanWordEl = document.getElementById("korean-word");
  const answerButtonsEl = document.getElementById("answer-buttons");
  const switchModeBtn = document.getElementById("switch-mode-btn");
  const wrongList = document.getElementById("wrong-list");
  const toggleMusicBtn = document.getElementById("toggle-music");

  // Ses elementleri
  const clickSound = document.getElementById("click-sound");
  const correctSound = document.getElementById("correct-sound");
  const wrongSound = document.getElementById("wrong-sound");
  const musicSound = document.getElementById("music-sound");

  let mode = "kimbap"; // "kimbap" veya "gocu"
  let quizWords = []; // 20 tane rastgele seÃ§ilen kelimeler
  let currentQuestionIndex = 0;
  let wrongAnswers = []; // {korean, turkish} yanlÄ±ÅŸlar
  let lastTwoCorrectPositions = []; // doÄŸru cevabÄ±n son 2 index'i (3 kere Ã¼st Ã¼ste aynÄ± olmamasÄ± iÃ§in)

  // Rastgele diziyi karÄ±ÅŸtÄ±rma fonksiyonu
  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  // MÃ¼zik aÃ§/kapa
  let musicPlaying = false;
  function toggleMusic() {
    if (musicPlaying) {
      musicSound.pause();
      toggleMusicBtn.textContent = "ðŸ”ˆ";
    } else {
      musicSound.play();
      toggleMusicBtn.textContent = "ðŸ”‡";
    }
    musicPlaying = !musicPlaying;
  }

  toggleMusicBtn.addEventListener("click", () => {
    playClickSound();
    toggleMusic();
  });

  function playClickSound() {
    clickSound.currentTime = 0;
    clickSound.play();
  }
  function playCorrectSound() {
    correctSound.currentTime = 0;
    correctSound.play();
  }
  function playWrongSound() {
    wrongSound.currentTime = 0;
    wrongSound.play();
  }

  // Oyunu baÅŸlat
  function startGame(selectedMode) {
    mode = selectedMode;
    // Rastgele 20 kelime seÃ§
    quizWords = shuffle([...words]).slice(0, 20);
    currentQuestionIndex = 0;
    wrongAnswers = [];
    wrongList.innerHTML = "";
    lastTwoCorrectPositions = [];

    // EkranlarÄ± ayarla
    startScreen.classList.remove("active");
    quizScreen.classList.add("active");

    updateModeUI();
    showQuestion();
  }

  // Mod etiketlerini ve dÃ¼ÄŸme metnini gÃ¼ncelle
  function updateModeUI() {
    if (mode === "kimbap") {
      modeLabel.textContent = "Kimbap Modu (Kolay)";
      switchModeBtn.textContent = "Kolay mÄ± geldi? Biraz acÄ± ekleyelim!";
    } else {
      modeLabel.textContent = "GoÃ§u Modu (Zor)";
      switchModeBtn.textContent = "Zor mu geldi? Kimbapâ€™a dÃ¶nelim!";
    }
  }

  // Soru gÃ¶ster
  function showQuestion() {
    const questionObj = quizWords[currentQuestionIndex];
    koreanWordEl.textContent = questionObj.korean;
    questionCounter.textContent = `${currentQuestionIndex + 1}/20`;

    // ÅžÄ±k sayÄ±sÄ± mod'a gÃ¶re
    const choiceCount = mode === "kimbap" ? 3 : 6;

    // DoÄŸru cevabÄ± ekle + random baÅŸka kelimeler ekle
    const answers = [questionObj.turkish];
    // Geri kalan 2 veya 5 ÅŸÄ±k iÃ§in
    const others = shuffle(words.filter(w => w.turkish !== questionObj.turkish))
                   .slice(0, choiceCount - 1)
                   .map(item => item.turkish);
    answers.push(...others);

    // CevaplarÄ± karÄ±ÅŸtÄ±rmadan Ã¶nce, doÄŸru cevabÄ±n konumunu ayarlayacaÄŸÄ±z
    // "3 kere Ã¼st Ã¼ste aynÄ± index" olmamasÄ± iÃ§in ufak bir fonksiyon yazalÄ±m
    const correctPos = getRandomCorrectPosition(choiceCount, lastTwoCorrectPositions);
    // Yani "answers" dizisinde 0. index'e doÄŸru cevap koyacaksak, Ã¶nce swap vs. yapalÄ±m
    // Åžu an "answers[0]" doÄŸru cevap, ama biz correctPos'a atacaÄŸÄ±z
    const correctAnswer = answers[0];
    // answers[0] ile answers[correctPos] yer deÄŸiÅŸtir
    [answers[0], answers[correctPos]] = [answers[correctPos], answers[0]];

    // lastTwoCorrectPositions gÃ¼ncelle
    lastTwoCorrectPositions.push(correctPos);
    if (lastTwoCorrectPositions.length > 2) {
      lastTwoCorrectPositions.shift(); // sadece son 2 taneyi tut
    }

    // Åžimdi answers dizisini karÄ±ÅŸtÄ±rsaydÄ±k correctPos boÅŸa giderdi.
    // Bu yÃ¶ntemle direkt correctPos'a yerleÅŸtirmiÅŸ olduk.
    
    // Ekrana bas
    renderAnswerButtons(answers);
  }

  // DoÄŸru cevabÄ±n 3 kere Ã¼st Ã¼ste aynÄ± index'te olmamasÄ±nÄ± saÄŸlayan basit fonksiyon
  function getRandomCorrectPosition(choiceCount, lastPositions) {
    let pos;
    let tries = 0;
    do {
      pos = Math.floor(Math.random() * choiceCount);
      tries++;
      // son 2 pozisyona bak, ikisi de aynÄ± ve pos da aynÄ±ysa tekrar dene
    } while (
      lastPositions.length === 2 &&
      lastPositions[0] === lastPositions[1] &&
      lastPositions[0] === pos &&
      tries < 100
    );
    return pos;
  }

  // ÅžÄ±k butonlarÄ±nÄ± oluÅŸturma
  function renderAnswerButtons(answersArray) {
    answerButtonsEl.innerHTML = "";
    answersArray.forEach((answerText, index) => {
      const btn = document.createElement("button");
      btn.className = "answer-btn";
      btn.textContent = answerText;
      btn.onclick = () => handleAnswerClick(answerText);
      answerButtonsEl.appendChild(btn);
    });
  }

  // ÅžÄ±k tÄ±klandÄ±ÄŸÄ±nda
  function handleAnswerClick(selectedText) {
    playClickSound();
    const questionObj = quizWords[currentQuestionIndex];
    const correctAnswer = questionObj.turkish;

    if (selectedText === correctAnswer) {
      // DoÄŸru
      playCorrectSound();
    } else {
      // YanlÄ±ÅŸ
      playWrongSound();
      // YanlÄ±ÅŸ listede yoksa ekle
      const alreadyWrong = wrongAnswers.some(
        (w) => w.korean === questionObj.korean
      );
      if (!alreadyWrong) {
        wrongAnswers.push({ korean: questionObj.korean, turkish: correctAnswer });
        const li = document.createElement("li");
        li.textContent = `${questionObj.korean} : ${correctAnswer}`;
        wrongList.appendChild(li);
      }
    }

    // Sonraki soruya geÃ§
    currentQuestionIndex++;
    if (currentQuestionIndex >= quizWords.length) {
      // Oyun bitti
      alert("Quiz bitti!");
      // Yeniden baÅŸa dÃ¶nebilirsin veya tekrar startGame() Ã§aÄŸÄ±rabilirsin
      startScreen.classList.add("active");
      quizScreen.classList.remove("active");
    } else {
      showQuestion();
    }
  }

  // Mod deÄŸiÅŸtirme
  function switchMode() {
    mode = (mode === "kimbap") ? "gocu" : "kimbap";
    updateModeUI();
    // Mevcut soruda kaldÄ±k, sadece ÅŸÄ±k sayÄ±sÄ±nÄ± yeniden Ã§izelim
    showQuestion();
  }

  // Event Listeners
  kimbapBtn.addEventListener("click", () => {
    playClickSound();
    startGame("kimbap");
  });
  gocuBtn.addEventListener("click", () => {
    playClickSound();
    startGame("gocu");
  });
  switchModeBtn.addEventListener("click", () => {
    playClickSound();
    switchMode();
  });

</script>

</body>
</html>
