<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korece Kelime Quiz Oyunu</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400&family=Coiny&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Comfortaa', sans-serif; }
        body { background: white; display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; }
        .container { text-align: center; max-width: 800px; width: 100%; padding: 20px; }
        h1 { font-family: 'Coiny', cursive; color: #9FD520; font-size: 50px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.25); }
        .mode-selection { display: flex; justify-content: center; gap: 30px; margin-top: 20px; }
        .mode-btn { background: #F7D9C4; border: 3px solid #FFC49A; padding: 20px; font-size: 24px; cursor: pointer; border-radius: 10px; }
        .mode-btn:hover { background: #FFC49A; }
        .question-box { display: none; margin-top: 30px; }
        .question { font-size: 36px; color: #9CD713; }
        .options { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 20px; }
        .option-btn { background: #F7D9C4; border: 2px solid #FFC49A; padding: 15px 25px; font-size: 20px; cursor: pointer; border-radius: 8px; }
        .option-btn:hover { background: #FFC49A; }
        .feedback { font-size: 20px; margin-top: 15px; height: 30px; }
        .restart-btn { display: none; margin-top: 20px; padding: 10px 20px; font-size: 20px; background: #9CD713; color: white; border-radius: 8px; cursor: pointer; }
        #music-control { position: fixed; top: 20px; left: 20px; background: #F7D9C4; padding: 10px; border-radius: 50px; cursor: pointer; }
    </style>
</head>
<body>

    <button id="music-control">üîä M√ºzik: A√ßƒ±k</button>

    <div class="container">
        <h1>Korece Kelime Oyunu</h1>
        <p>Ba≈ülamadan √∂nce oyun modunu se√ß!</p>

        <div class="mode-selection">
            <button class="mode-btn" onclick="chooseMode('kimbap')">üçô Kimbap Modu (3 ≈ûƒ±k)</button>
            <button class="mode-btn" onclick="chooseMode('gocu')">üå∂Ô∏è Go√ßu Modu (6 ≈ûƒ±k)</button>
        </div>

        <div class="question-box" id="question-box">
            <p class="question" id="question-text">Soru Y√ºkleniyor...</p>
            <div class="options" id="options"></div>
            <p class="feedback" id="feedback"></p>
            <button class="restart-btn" id="restart-btn" onclick="restartGame()">Ba≈ütan Ba≈üla</button>
        </div>
    </div>

    <script>
        let allQuestions = [];
        let currentQuestion = null;
        let selectedMode = "kimbap";
        let music = new Audio('music.mp3');
        music.loop = true;

        let clickSound = new Audio('click.mp3');
        let correctSound = new Audio('correct.mp3');
        let wrongSound = new Audio('wrong.mp3');

        function loadJSON() {
            fetch('data.json')
                .then(response => response.json())
                .then(data => {
                    allQuestions = data;
                    console.log("‚úÖ Sorular y√ºklendi:", allQuestions);
                })
                .catch(error => console.error("‚ùå JSON y√ºklenirken hata olu≈ütu:", error));
        }

        window.onload = loadJSON;

        function chooseMode(mode) {
            selectedMode = mode;
            document.querySelector(".mode-selection").style.display = "none";
            document.getElementById("question-box").style.display = "block";
            loadQuestion();
            music.play();
        }

        function loadQuestion() {
            if (allQuestions.length === 0) {
                alert("Sorular y√ºklenmedi, l√ºtfen tekrar deneyin.");
                return;
            }

            currentQuestion = allQuestions[Math.floor(Math.random() * allQuestions.length)];
            document.getElementById("question-text").textContent = `Korece "${currentQuestion.Korece}" kelimesinin T√ºrk√ße kar≈üƒ±lƒ±ƒüƒ± nedir?`;

            let correctAnswer = currentQuestion.T√ºrk√ße;
            let wrongAnswers = allQuestions
                .filter(q => q.T√ºrk√ße !== correctAnswer)
                .map(q => q.T√ºrk√ße)
                .sort(() => Math.random() - 0.5)
                .slice(0, selectedMode === "kimbap" ? 2 : 5);

            let options = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);
            let optionsDiv = document.getElementById("options");
            optionsDiv.innerHTML = "";
            options.forEach(opt => {
                let btn = document.createElement("button");
                btn.className = "option-btn";
                btn.textContent = opt;
                btn.onclick = () => checkAnswer(opt);
                optionsDiv.appendChild(btn);
            });

            document.getElementById("feedback").textContent = "";
            document.getElementById("restart-btn").style.display = "none";
        }

        function checkAnswer(selected) {
            let feedback = document.getElementById("feedback");
            if (selected === currentQuestion.T√ºrk√ße) {
                feedback.textContent = "‚úÖ Doƒüru!";
                correctSound.play();
            } else {
                feedback.textContent = `‚ùå Yanlƒ±≈ü! Doƒüru cevap: ${currentQuestion.T√ºrk√ße}`;
                wrongSound.play();
            }

            document.getElementById("restart-btn").style.display = "block";
        }

        function restartGame() {
            document.querySelector(".mode-selection").style.display = "flex";
            document.getElementById("question-box").style.display = "none";
        }

        document.getElementById("music-control").addEventListener("click", () => {
            music.paused ? music.play() : music.pause();
            document.getElementById("music-control").textContent = music.paused ? "üîá M√ºzik: Kapalƒ±" : "üîä M√ºzik: A√ßƒ±k";
        });
    </script>

</body>
</html>
